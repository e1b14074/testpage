<html>
	<head>
		<title>画像処理ライントレーサー（仮）</title>
	</head>
	
	<body>
		<h1 align="center">画像処理ライントレーサー（仮）</h1>
		<hr>
		<h2>０．はじめに</h2>
			このページは<a href ="http://www.adventar.org/calendars/1423">OIT Advent Calendar 2016</a>の記事です。<br>
			また、私は普段ブログを書いていないためこのページはHTMLで書いています。そのため、見た目が微妙ですがご了承ください。<br>
			<br>
			では、簡単に自己紹介から、<br>
			OITのIS科所属のB14074です。<br>
			部活動として、UbiquitousRobotLab.　学生プロジェクトとして、競技プログラミングをやっています。<br>
			趣味は、高校の部活からやっているロボット制作です。<br>
			このページは、その趣味でやっている内容の一部を超適当に力尽きるまで書いていきます。<br>
			
			
		<h2>１．ライントレーサーとは</h2>
		ライントレーサーとは、コースの中央にある線をセンサーで探しながら、その上を走る車型ロボットです。
		<img src="コース.jpg"><br>
		<img src="アドバンス.JPG"><br>
		マシンの先端についているものが赤外線センサーです。<br><br>
		<img src="赤外線.JPG"><br>
		このセンサーでコースの白黒を判断し、白線と車体のズレを判定。<br>
		そして、ズレを修正するようにハンドルを曲げながら走行させます。
		
		<h2>２．画像からライン位置を判断する</h2>
		赤外線センサーの代わりに、カメラを使用して走行させます。<br>
		<img src="カメラ.jpg"><br>
		<img src="カメラ前.jpg"><br>
		このカメラで撮影すると下のような画像が得られます。<br><br>
		<img src="2d.jpg"><br>
		そして、実際は白線の位置が判断できればいいので、一行だけ使用します。<br><br>
		<img src="1d.jpg"><br>
		また、一番明るい色の白は128,一番暗い色の黒は0として、数値を配列に格納します。<br>
		なお、横のbit数は１２８個とします。<br>
		すると、配列の各数値をグラフ化すると以下のようになります。<br>
		手書きですいません<br>
		<img src="グラフ.jpg"><br>
		実際は、白黒の境目がぼやけて見えるので、矩形波ではなく正弦波？曲線？になります。<br>
		さらに、このグラフを微分します。<br>
		<img src="微分.jpg"><br>
		この数値から、最大値と最小値の添え字を見つけます。<br>
		すると、MAX-MINが白線の太さ。<br>
		（MAX+MIN）/２が白線の位置と判断できます。<br>
		
		
		<h2>３．ライン位置からハンドルを動かす</h2>
		次は、ライン位置が分かったので、ハンドルを曲げる力を計算します。<br>
		方法そして、<a href ="https://ja.wikipedia.org/wiki/PID%E5%88%B6%E5%BE%A1">PID制御</a>とか古典制御とよばれる方式を使用します。<br>
		解説は大変（できそうにない）なので省略します。
		<br><br>
		そろそろ眠くなってきたので終わります。<br>
		読んでくれた方、ありがとうございます。興味があれば、大学内で私を探してください。<br>
		
	</body>
</html>